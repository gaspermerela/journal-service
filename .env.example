# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=postgres
DATABASE_USER=journal_user
DATABASE_PASSWORD=password

# Application Configuration
# HOST: Use 127.0.0.1 to bind to localhost only
#       Use 0.0.0.0 to allow direct access from any interface
HOST=127.0.0.1
PORT=8000
LOG_LEVEL=INFO

# Storage Configuration
# Host path where audio files will be stored (mounted to /app/data/audio in container)
# Defaults to ./data/audio (relative to project directory)
# AUDIO_STORAGE_PATH_HOST=./data/audio

MAX_FILE_SIZE_MB=100

# Whisper Transcription Configuration
WHISPER_MODEL=large-v3  # Options: tiny, base, small, medium, large, large-v3 (recommended)
WHISPER_DEVICE=cpu  # Options: cpu, cuda (for GPU). Note: large-v3 requires ~10GB RAM
TORCH_NUM_THREADS=10  # Number of CPU threads for PyTorch

# Audio Preprocessing Configuration
# Automatically preprocesses all uploaded audio for consistent transcription quality
ENABLE_AUDIO_PREPROCESSING=true  # Set to false to disable preprocessing
PREPROCESSING_SAMPLE_RATE=16000  # Target sample rate (16kHz optimal for Whisper)
PREPROCESSING_HIGHPASS_FREQ=60  # High-pass filter frequency in Hz
PREPROCESSING_LOUDNORM_I=-16  # Integrated loudness target (LUFS)
PREPROCESSING_LOUDNORM_TP=-1.5  # True peak target (dBTP)
PREPROCESSING_LOUDNORM_LRA=11  # Loudness range target (LU)
PREPROCESSING_SILENCE_THRESHOLD=-80dB  # Silence detection threshold
PREPROCESSING_SILENCE_DURATION=0.5  # Minimum silence duration in seconds

# LLM Cleanup Configuration
# Ollama service URL (use http://ollama:11434 in Docker, http://localhost:11434 for local dev)
OLLAMA_BASE_URL=http://localhost:11434
# Model to use for text cleanup (llama3.2:3b recommended for CPU)
# NOTE: Model has to be downloaded. We manage this in "ollama-init" container
OLLAMA_MODEL=llama3.2:3b
# Maximum time to wait for LLM response (seconds)
LLM_TIMEOUT_SECONDS=120
# Number of retries on LLM API failure
LLM_MAX_RETRIES=2

# CORS Configuration (comma-separated)
CORS_ORIGINS=*

# JWT Authentication Configuration
# Generate a secure random secret key (minimum 32 characters recommended)
# Example: openssl rand -hex 32
JWT_SECRET_KEY=your-secret-key
JWT_ALGORITHM=HS256
# Token expiration in days
ACCESS_TOKEN_EXPIRE_DAYS=7
REFRESH_TOKEN_EXPIRE_DAYS=30

# Worker Configuration
# Set to 1 for single worker, increase based on available CPUs
WORKERS=1

# Database Pool Configuration
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# Development/Debug
DEBUG=false
RELOAD=false

# ==========================================
# Deployment Configuration (Optional)
# Used by docker/git-deploy.sh
# ==========================================

# Project directory (where git repo is located)
# Defaults to script location parent directory
# PROJECT_DIR=/home/ubuntu/journal-service

# Backup directory for database dumps
# Defaults to ./backups (relative to project directory)
# The backup script uses pg_dump to connect directly to postgres
# BACKUP_DIR=/var/backups/journal-service

# Docker Compose file location (used by git-deploy.sh only)
# Uncomment to use a different compose file
# COMPOSE_FILE=docker-compose.prod.yml

# Image name for Docker builds
# Uncomment to override default
# IMAGE_NAME=journal-service
